## Requested Information for Code

### Readings
Some scientists, including economists, have put together excellent guidance and tutorials. See
- [Gentzkow-Shapiro Lab's RA Manual](https://github.com/gslab-econ/ra-manual/wiki/Getting-Started), in particular [Stata Style](https://github.com/gslab-econ/ra-manual/wiki/Stata)
- [Basics of Reproducible Workflow](https://www.practicereproducibleresearch.org/core-chapters/3-basic.html)

### README and master script
All replication archives should have a README (in PDF, text, or a simple formatting language such as Markdown, like this document). The README should provide a sufficient description to understand the structure of the replication archive (directory structure, what is acquired from third parties, what is generated by scripts, how much output to expect). It should document each file or class of files that are included.

We strongly encourage the provision of a master script. The master script should run all programs necessary to provide the outputs, in the right sequence, robustly.

In some cases, the master script might also serve as a README (for instance, "README.bash", "README.py", "README.Rmd"), as long as it satisfies all conditions of the README as well (i.e., ample comments).

### Configuration

We strongly encourage the use of a single configuration file, containing all path names. 
- Encouraged:
```
global basepath "C:/My Documents/Paper 15/"
global includes "${basepath}/includes"
global inputdata "${basepath}/inputdata"
global tables    "${basepath}/text/tables"
set matsize 11000
```

We strongly encourage the use of relative paths for included programs, data, and outputs.
- Discouraged:
```
include "C:\My Documents\yesterdays programs\submodule.do"
```
- Encouraged:
```
include "includes/submodule.do"
```
or
```
include "${includes}/submodule.do"
```

We strongly encourage listing ALL dependencies and packages needed to run. The best way to achieve this is to have a project-specific directory for packages:
#### Stata
- In Stata, reset the Personal ADO directory:
```
sysdir set PERSONAL "$basepath/ado/personal"
sysdir set PLUS "$basepath/ado/plus"
```

Stata will then install the new extension into that directory instead of c:\ado\plus ([source](https://www.stata.com/support/faqs/programming/personal-ado-directory/) )

You can then create a single dependency file that is run before all others:
```
00_install.do:
ssc install package1
ssc install package2
ssc install package3
```
#### R
Similar functionality can be achieved in R using the `packrat` package, or by manually resetting the R library locations.

#### Python
Python uses a `dependency.txt` which can list all necessary dependencies, and can in turn be used to re-install those dependencies.

### Things not to do
-  We strongly discourage writing comments like
```
Run this a first time, generating column 1 of Table 3.
Then comment out line 55, then run a second time, which should
give you column 3 of Table 3.
Then uncomment line 55, change the parameter in line 67 to "5",
and run again to get column 2 of Table 3.
```
(this is only slightly paraphrased from an actual example).
-  Avoid ambiguous or imprecise instructions  like
```
Have superDynare available
```
or
```
Use the outreg55 package
```
(no URL or installation command provided)

![xkcd-data-pipeline](https://imgs.xkcd.com/comics/data_pipeline.png)

### Things to do
- Explain briefly how to RUN your code - do not assume that everybody now or in the future knows how to run `make`, Matlab+Dynare, or even Stata.
-  Write code that can be run without human intervention, ideally without using a graphical interface.
-  Use functions/programs/loops/etc. to iterate through variations of an otherwise identical procedure (but ensure that the purpose of the loop is well described)
-  Identify all requirements to allow somebody to successfully run the code who has NOT been experimenting with the software and code for the past 5 years on the same laptop. This means
  -  what packages need to be installed, from where, which versions
  ```{stata}
  ssc install outreg55, from(https://myurl/to/o) // accurate as of 2018-10-03
  ```
  or
  ```{r}
  # Known to work with dplyr 0.7.6
  install.packages(c("dplyr","devtools"))
  library(dplyr)
  library(devtools)
  install_github("myrepo/superols")
  ```
### Some facts
Most economists in the late 2000s (through 2018) use either Stata or Matlab. Assume that replicators have not (yet) learned your preferred software if you are using something else, and provide some guidance how to use it.

![software usage AER](https://raw.githubusercontent.com/pbaylis/econ-program-usage-data/master/aer_programs_by_year.png)
Figure: Software usage in the AER, 2000-2018 (Source: [Baylis and Schrimpf, 2018](http://doi.org/10.5281/zenodo.1453556))


